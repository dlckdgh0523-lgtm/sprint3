generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// --- ì¤‘ê³ ë§ˆì¼“ ---

model Product {
  id          Int      @id @default(autoincrement())
  last_name   String?  @db.VarChar(255)
  description String?
  price       Int
  tags        String[] @default([])
  
  // ğŸ”¥ [ìˆ˜ì • 1] image í•„ë“œ ì¶”ê°€ (String? = ì—†ì–´ë„ ë¨)
  image       String?  
  
  viewCount   Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.Timestamptz(6)
  
  comments    ProductComment[]
}

model ProductComment {
  id         Int      @id @default(autoincrement())
  content    String
  image      String?  
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  
  product    Product  @relation(fields: [product_id], references: [id], onDelete: Cascade)
  product_id Int
}

// --- ììœ ê²Œì‹œíŒ ---

model Article {
  id          Int      @id @default(autoincrement())
  title       String
  content     String   // ì—¬ê¸°ì— HTML ì½”ë“œê°€ ë“¤ì–´ê°
  
  // ğŸ”¥ [ìˆ˜ì • 2] bodyë¥¼ í•„ìˆ˜(String)ì—ì„œ ì„ íƒ(String?)ìœ¼ë¡œ ë³€ê²½!
  // ì´ì œ bodyë¥¼ ì•ˆ ë³´ë‚´ë„ ì—ëŸ¬ê°€ ì•ˆ ë‚©ë‹ˆë‹¤.
  body        String?  
  
  // ğŸ”¥ [ìˆ˜ì • 3] image í•„ë“œ ì¶”ê°€
  image       String?

  published   Boolean  @default(false)
  viewCount   Int      @default(0)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.Timestamptz(6)

  comments    ArticleComment[]
}

model ArticleComment {
  id          Int      @id @default(autoincrement())
  content     String
  image       String?
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz(6)

  article     Article  @relation(fields: [article_id], references: [id], onDelete: Cascade)
  article_id  Int
}